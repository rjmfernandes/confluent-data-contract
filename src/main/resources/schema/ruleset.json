{
  "ruleSet": {
    "domainRules": [
      {
        "name": "checkFirstNameSize",
        "kind": "CONDITION",
        "type": "CEL",
        "mode": "WRITE",
        "expr": "size(message.firstName) > 3",
        "onFailure": "ERROR"
      },
      {
        "name": "checkLastNameSize",
        "kind": "CONDITION",
        "type": "CEL",
        "mode": "WRITE",
        "expr": "size(message.lastName) > 3",
        "onFailure": "DLQ",
        "params": {
          "dlq.topic": "users-dlq",
          "producer": "test"
        },
        "disabled": false
      },
      {
        "name": "checkAge",
        "kind": "CONDITION",
        "type": "CEL",
        "mode": "WRITE",
        "expr": "message.age > 17",
        "onFailure": "ERROR"
      },
      {
        "name": "fillFullName",
        "kind": "TRANSFORM",
        "type": "CEL_FIELD",
        "mode": "READ",
        "expr": "name == \"fullName\" ; size(value) <= 3 ? message.firstName + ' ' + message.lastName : value",
        "disabled": false
      }
    ]
  }
}